

function (_ENV)
local string, math, print, type, pairs = nil, nil, nil, nil, nil;
local _module = _obj({exports=_obj({})}); local exports, module = _module.exports, _module;

local fs, utils, favicon = fs, utils, favicon;
fs = require(global, ("fs"));
utils = require(global, ("../utils"));
(module).exports = (function () favicon = (function (this, path, options)
local favicon = _debug.getinfo(1, 'f').func;
local options, path, maxAge, icon, favicon = options, path, maxAge, icon, favicon;
options = options or _obj({
  });
path = path or (____dirname + ("/../public/favicon.ico"));
maxAge = (options).maxAge or (86400000);
icon = nil;
if true then return (function () favicon = (function (this, req, res, next)
local favicon = _debug.getinfo(1, 'f').func;
if _truthy((("/favicon.ico") == (req).url)) then
if _truthy(icon) then
if res:writeHead((200), icon.headers) then end;
if (function () local base, prop = res, "end"; return base[prop](base, icon.body); end)() then end;
else
if fs:readFile(path, (function (this, err, buf)
if _truthy(err) then
if true then return next(global, err); end;
end
icon = _obj({
  ["headers"]=_obj({
  ["Content-Type"]=("image/x-icon"),
  ["Content-Length"]=(buf).length,
  ["ETag"]=((("\"") + utils:md5(buf)) + ("\"")),
  ["Cache-Control"]=(("public, max-age=") + ((maxAge / (1000))))}),
  ["body"]=buf});
if res:writeHead((200), icon.headers) then end;
if (function () local base, prop = res, "end"; return base[prop](base, icon.body); end)() then end;
end)) then end;
end
else
if next(global) then end;
end
end); return favicon; end)(); end;
end); return favicon; end)();

return _module.exports;
end