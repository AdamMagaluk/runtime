

 
int main(int argc , char *argv[])
{
    tm_socket_t socket_desc;
    char *message , server_reply[2000];
     
    // Create socket
    socket_desc = tm_tcp_open();
    if (socket_desc == TM_SOCKET_INVALID) {
        printf("Could not create socket");
        return 1;
    }

    if (tm_tcp_connect(socket_desc, 74, 125, 235, 20, 80) < 0) {
        puts("connect error");
        return 1;
    }
     
    // Send some data
    message = "GET / HTTP/1.1\r\n\r\n";
    if (tm_tcp_write(socket_desc, message, strlen(message)) < 0) {
        puts("Send failed");
        return 1;
    }

    while (1) {
        while (!tm_tcp_readable(socket_desc)) {
            continue;
        }

        memset(server_reply, 0, 2000);
        if (tm_tcp_read(socket_desc, server_reply, 2000) <= 0) {
            puts("recv failed");
        } else {
            puts(server_reply);
        }
    }

    puts("DONE");
    return 0;
}